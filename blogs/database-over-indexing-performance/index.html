<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Database Over-Indexing: When More Indexes Actually Hurt Performance | Utkarsh Shukla</title>

    <link rel="shortcut icon" type="image/x-icon" href="https://utkarshukla.github.io/assets/img/utslogo.jpg">

    <!-- SEO Meta Tags -->
    <meta name="robots" content="index, follow">
    <meta name="description"
        content="Indexes are often treated as a silver bullet for database performance, but experienced developers know that over-indexing can be just as harmful as under-indexing. Learn the strategies to find the right balance.">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="keywords"
        content="Database Indexing, Over-Indexing, MySQL Performance, PostgreSQL Optimization, Database Performance, Index Strategy, SQL Optimization, Backend Development">
    <meta name="author" content="Utkarsh Shukla">
    <meta name="article:published_time" content="2026-01-20">
    <meta name="article:author" content="Utkarsh Shukla">
    <meta name="article:section" content="Backend Strategy">
    <meta name="article:tag" content="Database, Performance, MySQL, PostgreSQL, Optimization">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Database Over-Indexing: When More Indexes Actually Hurt Performance">
    <meta property="og:description"
        content="Indexes are often treated as a silver bullet for database performance, but experienced developers know that over-indexing can be just as harmful as under-indexing. Learn the strategies to find the right balance.">
    <meta property="og:image" content="https://utkarshukla.github.io/assets/images/blog/over-indexing.png">
    <meta property="og:url" content="https://utkarshukla.github.io/blogs/database-over-indexing-performance/">
    <meta property="og:site_name" content="Utkarsh Shukla - Software Developer">
    <meta property="article:published_time" content="2026-01-20T00:00:00+05:30">
    <meta property="article:author" content="https://github.com/utkarshukla">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Database Over-Indexing: When More Indexes Actually Hurt Performance">
    <meta name="twitter:description"
        content="Indexes are often treated as a silver bullet for database performance, but over-indexing can be just as harmful. Learn the strategies to find the right balance.">
    <meta name="twitter:image" content="https://utkarshukla.github.io/assets/images/blog/over-indexing.png">
    <meta name="twitter:creator" content="@utkarshukla">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://utkarshukla.github.io/blogs/database-over-indexing-performance/">

    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "headline": "Database Over-Indexing: When More Indexes Actually Hurt Performance",
        "description": "Indexes are often treated as a silver bullet for database performance, but experienced developers know that over-indexing can be just as harmful as under-indexing. Learn the strategies to find the right balance.",
        "image": "https://utkarshukla.github.io/assets/images/blog/over-indexing.png",
        "datePublished": "2026-01-20",
        "dateModified": "2026-01-20",
        "author": {
            "@type": "Person",
            "name": "Utkarsh Shukla",
            "url": "https://utkarshukla.github.io"
        },
        "publisher": {
            "@type": "Person",
            "name": "Utkarsh Shukla",
            "logo": {
                "@type": "ImageObject",
                "url": "https://utkarshukla.github.io/assets/img/utslogo.jpg"
            }
        },
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://utkarshukla.github.io/blogs/database-over-indexing-performance/"
        },
        "keywords": ["Database", "Performance", "MySQL", "PostgreSQL", "Optimization", "Indexing"]
    }
    </script>

    <!-- CSS -->
    <link rel="stylesheet" href="../../assets/css/vendor/bootstrap.min.css">
    <link rel="stylesheet" href="../../assets/css/vendor/aos.css">
    <link rel="stylesheet" href="../../assets/css/style.css">

    <!-- Prism.js for Code Highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">

    <style>
        /* ===========================================
           BLOG POST PAGE STYLES
        =========================================== */

        :root {
            --theme-transition: 0.3s ease;
        }

        body.dark-version {
            background-color: #212428 !important;
        }

        body.dark-version .main-page-wrapper,
        body.dark-version header.rn-header,
        body.dark-version .rn-footer-area {
            background-color: #212428 !important;
        }

        /* Blog Post Container */
        .blog-post-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 140px 20px 80px;
        }

        /* Back Link */
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            color: #ff014f;
            text-decoration: none;
            font-weight: 500;
            margin-bottom: 40px;
            transition: opacity 0.3s ease;
        }

        .back-link:hover {
            opacity: 0.8;
            color: #ff014f;
        }

        .back-link svg {
            transition: transform 0.3s ease;
        }

        .back-link:hover svg {
            transform: translateX(-5px);
        }

        /* Post Header */
        .post-header {
            margin-bottom: 40px;
        }

        .post-header .category {
            display: inline-block;
            background: linear-gradient(145deg, #ff014f, #d11414);
            color: #fff;
            padding: 6px 18px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 20px;
        }

        .post-header .title {
            font-size: 42px;
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: 15px;
            color: #1c1e22;
            /* Explicit Light Theme Color */
        }

        .post-header .subtitle {
            font-size: 20px;
            color: #878e99;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .post-header .meta {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }

        .post-header .author {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .post-header .author img {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            object-fit: cover;
        }

        .post-header .author-info .name {
            font-weight: 600;
            color: #1e2125;
        }

        .post-header .author-info .date {
            font-size: 14px;
            color: #878e99;
        }

        .post-header .read-time {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
            color: #878e99;
        }

        /* Featured Image */
        .featured-image {
            width: 100%;
            max-height: 450px;
            object-fit: cover;
            border-radius: 20px;
            margin-bottom: 50px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        /* Post Content */
        .post-content {
            font-size: 18px;
            line-height: 1.8;
            color: #3c3e41;
        }

        .post-content p {
            margin-bottom: 25px;
        }

        .post-content h2 {
            font-size: 32px;
            font-weight: 700;
            margin: 50px 0 20px;
            color: #1e2125;
        }

        .post-content h3 {
            font-size: 24px;
            font-weight: 600;
            margin: 40px 0 15px;
            color: #1e2125;
        }

        .post-content ul,
        .post-content ol {
            margin-bottom: 25px;
            padding-left: 25px;
        }

        .post-content li {
            margin-bottom: 12px;
            line-height: 1.7;
        }

        .post-content strong {
            color: #1e2125;
            font-weight: 600;
        }

        /* Code Blocks */
        .post-content pre {
            background: #2d2d2d;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
            overflow-x: auto;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        .post-content pre code {
            font-family: 'Fira Code', 'Monaco', 'Consolas', monospace;
            font-size: 14px;
            line-height: 1.6;
        }

        .post-content code:not(pre code) {
            background: rgba(255, 1, 79, 0.1);
            color: #ff014f;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.9em;
            font-family: 'Fira Code', 'Monaco', 'Consolas', monospace;
        }

        /* Tags */
        .post-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 50px;
            padding-top: 30px;
            border-top: 1px solid #e0e0e0;
        }

        .post-tags .tag {
            background: rgba(255, 1, 79, 0.1);
            color: #ff014f;
            padding: 8px 18px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .post-tags .tag:hover {
            background: #ff014f;
            color: #fff;
        }

        /* Dark Theme Styles */
        body.dark-version .post-header .title {
            color: #ffffff;
        }

        body.dark-version .post-header .subtitle {
            color: #878e99;
        }

        body.dark-version .post-header .meta {
            border-top-color: #3c3f43;
        }

        body.dark-version .post-header .author-info .name {
            color: #ffffff;
        }

        body.dark-version .post-content {
            color: #b8bcc4;
        }

        body.dark-version .post-content h2,
        body.dark-version .post-content h3 {
            color: #ffffff;
        }

        body.dark-version .post-content strong {
            color: #ffffff;
        }

        body.dark-version .post-tags {
            border-top-color: #3c3f43;
        }

        body.dark-version .featured-image {
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        /* Theme Toggle Styles */
        .theme-toggle-wrapper {
            position: relative;
            z-index: 102 !important;
        }

        /* Navigation & Header Z-Index Fixes */
        .mainmenu-nav {
            position: relative;
            z-index: 100;
        }

        .header-right {
            position: relative;
            z-index: 90;
        }

        .theme-toggle-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(145deg, #e2e8ec, #ffffff);
            box-shadow: 5px 5px 15px #D1D9E6, -5px -5px 15px #ffffff;
            cursor: pointer;
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .theme-toggle-btn:hover {
            transform: translateY(-3px);
        }

        .theme-toggle-btn::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(145deg, #ff014f, #d11414);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .theme-toggle-btn:hover::before {
            opacity: 1;
        }

        .theme-toggle-btn svg {
            position: absolute;
            z-index: 1;
        }

        .theme-toggle-btn .sun-icon {
            color: #ff014f;
            opacity: 1;
            transform: rotate(0deg) scale(1);
            transition: transform 0.2s ease, opacity 0.2s ease;
        }

        .theme-toggle-btn .moon-icon {
            color: #3c3e41;
            opacity: 0;
            transform: rotate(-90deg) scale(0);
            transition: transform 0.2s ease, opacity 0.2s ease;
        }

        .theme-toggle-btn .system-icon {
            color: #3c3e41;
            opacity: 0;
            transform: rotate(90deg) scale(0);
            transition: transform 0.2s ease, opacity 0.2s ease;
        }

        .theme-toggle-btn:hover svg {
            color: #ffffff;
        }

        body.dark-version .theme-toggle-btn {
            background: linear-gradient(145deg, #1e2024, #23272b);
            box-shadow: 10px 10px 19px #1c1e22, -10px -10px 19px #262a2e;
        }

        body.dark-version .theme-toggle-btn .sun-icon {
            opacity: 0;
            transform: rotate(90deg) scale(0);
        }

        body.dark-version .theme-toggle-btn .moon-icon {
            color: #ff014f;
            opacity: 1;
            transform: rotate(0deg) scale(1);
        }

        body[data-theme="system"] .theme-toggle-btn .sun-icon,
        body[data-theme="system"] .theme-toggle-btn .moon-icon {
            opacity: 0;
            transform: scale(0);
        }

        body[data-theme="system"] .theme-toggle-btn .system-icon {
            color: #ff014f;
            opacity: 1;
            transform: rotate(0deg) scale(1);
        }

        /* Header */
        body.dark-version .rn-header {
            background-color: transparent !important;
        }

        body.dark-version .rn-header.sticky {
            background-color: #212428 !important;
        }

        body.dark-version .mainmenu-nav .primary-menu li a,
        body.dark-version #sideNav .primary-menu li a {
            color: #ffffff !important;
        }

        body.dark-version .rn-btn {
            background: linear-gradient(145deg, #1e2024, #23272b) !important;
            box-shadow: 10px 10px 19px #1c1e22, -10px -10px 19px #262a2e !important;
        }

        body.dark-version .rn-btn span {
            color: #ff014f !important;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .blog-post-container {
                padding: 120px 15px 60px;
            }

            .post-header .title {
                font-size: 28px;
            }

            .post-header .subtitle {
                font-size: 16px;
            }

            .post-content h2 {
                font-size: 24px;
            }

            .post-content h3 {
                font-size: 20px;
            }

            .post-content {
                font-size: 16px;
            }

            .post-content pre {
                padding: 15px;
                font-size: 12px;
            }
        }
    </style>
</head>

<body class="template-color-1 spybody white-version">

    <!-- Start Header -->
    <header class="rn-header haeder-default black-logo-version header--fixed header--sticky">
        <div class="header-wrapper rn-popup-mobile-menu m--0 row align-items-center">
            <div class="col-lg-2 col-6">
                <div class="header-left">
                    <div class="logo">
                        <a href="../../index.html" style="display: flex; align-items: center;">
                            <img src="../../assets/img/utslogo.jpg" style="width: 60px; border-radius: 50%;"
                                alt="Utkarsh Shukla">
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-10 col-6">
                <div class="header-center">
                    <nav id="sideNav" class="mainmenu-nav navbar-example2 d-none d-xl-block">
                        <ul class="primary-menu nav nav-pills">
                            <li class="nav-item"><a class="nav-link" href="../../index.html#home">Home</a></li>
                            <li class="nav-item"><a class="nav-link" href="../../index.html#features">Features</a></li>
                            <li class="nav-item"><a class="nav-link" href="../../index.html#portfolio">Projects</a></li>
                            <li class="nav-item current"><a class="nav-link" href="../../blog.html">Blog</a></li>
                            <li class="nav-item"><a class="nav-link" href="../../index.html#contacts">Contact</a></li>
                        </ul>
                    </nav>
                    <div class="header-right"
                        style="display: flex !important; align-items: center !important; gap: 15px !important;">
                        <a class="rn-btn"
                            href="https://drive.google.com/file/d/1gvZwyh9z0UfmtDXzbON58kmKFn8Udpmm/view?usp=sharing"><span>Resume</span></a>
                        <!-- Theme Toggle Button -->
                        <div class="theme-toggle-wrapper" id="themeToggle" title="Toggle theme">
                            <button class="theme-toggle-btn" aria-label="Toggle theme">
                                <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="22" height="22"
                                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="5"></circle>
                                    <line x1="12" y1="1" x2="12" y2="3"></line>
                                    <line x1="12" y1="21" x2="12" y2="23"></line>
                                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                    <line x1="1" y1="12" x2="3" y2="12"></line>
                                    <line x1="21" y1="12" x2="23" y2="12"></line>
                                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                                </svg>
                                <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="22" height="22"
                                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                                </svg>
                                <svg class="system-icon" xmlns="http://www.w3.org/2000/svg" width="22" height="22"
                                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                                    <line x1="8" y1="21" x2="16" y2="21"></line>
                                    <line x1="12" y1="17" x2="12" y2="21"></line>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- End Header -->

    <main class="main-page-wrapper">
        <div class="blog-post-container">
            <a href="../../blog.html" class="back-link" data-aos="fade-right">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="19" y1="12" x2="5" y2="12"></line>
                    <polyline points="12 19 5 12 12 5"></polyline>
                </svg>
                Back to Blog
            </a>

            <article>
                <header class="post-header" data-aos="fade-up">
                    <span class="category">Backend Strategy</span>
                    <h1 class="title">Database Over-Indexing: When More Indexes Actually Hurt Performance</h1>
                    <p class="subtitle">A Deep Dive into Index Strategy for High-Performance Applications</p>
                    <div class="meta">
                        <div class="author">
                            <img src="../../assets/img/utslogo.jpg" alt="Utkarsh Shukla">
                            <div class="author-info">
                                <div class="name">Utkarsh Shukla</div>
                                <div class="date">January 20, 2026</div>
                            </div>
                        </div>
                        <span class="read-time">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            12 min read
                        </span>
                    </div>
                </header>

                <img src="../../assets/images/blog/over-indexing.png"
                    alt="Database Over-Indexing: When More Indexes Actually Hurt Performance" class="featured-image"
                    data-aos="fade-up">

                <div class="post-content" data-aos="fade-up">
                    <p>As backend developers, we've all been there—a slow query appears, and our first instinct is to
                        add an index. But here's a truth that separates senior engineers from juniors: <strong>more
                            indexes don't always mean better performance</strong>. In fact, over-indexing can cripple
                        your database's write performance, bloat your storage, and introduce subtle bugs that are
                        incredibly hard to diagnose.</p>

                    <h2>The Hidden Costs of Indexes</h2>
                    <p>Every index you create comes with hidden costs that compound over time:</p>
                    <ul>
                        <li><strong>Write Overhead</strong>: Every INSERT, UPDATE, and DELETE must update all relevant
                            indexes. With 10 indexes on a table, you're doing 10x the write work.</li>
                        <li><strong>Storage Bloat</strong>: Indexes consume disk space—sometimes more than the table
                            itself. I've seen production databases where indexes were 3x larger than the actual data.
                        </li>
                        <li><strong>Memory Pressure</strong>: The query optimizer needs to keep index statistics in
                            memory. More indexes = more memory consumption.</li>
                        <li><strong>Optimizer Confusion</strong>: With too many indexes, the query planner might choose
                            suboptimal execution plans, leading to slower queries.</li>
                    </ul>

                    <h2>Real-World Case Study: The E-Commerce Disaster</h2>
                    <p>In one of my projects, an e-commerce platform was experiencing severe performance degradation
                        during peak sales. The orders table had <strong>23 indexes</strong>—added over time by different
                        developers solving different problems. Here's what we found:</p>

                    <pre><code class="language-sql">-- The problematic table structure
CREATE TABLE orders (
    id BIGINT PRIMARY KEY,
    user_id BIGINT,
    product_id BIGINT,
    status VARCHAR(50),
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    -- ... 15 more columns
);

-- Too many overlapping indexes!
CREATE INDEX idx_user ON orders(user_id);
CREATE INDEX idx_user_status ON orders(user_id, status);
CREATE INDEX idx_user_created ON orders(user_id, created_at);
CREATE INDEX idx_user_status_created ON orders(user_id, status, created_at);
-- ... 19 more indexes</code></pre>

                    <p>The solution? We analyzed query patterns using <code>EXPLAIN ANALYZE</code> and consolidated to
                        just <strong>5 carefully designed composite indexes</strong>. The result:</p>
                    <ul>
                        <li>INSERT latency dropped from 45ms to 8ms (82% improvement)</li>
                        <li>Storage reduced by 2.3GB</li>
                        <li>Peak throughput increased by 340%</li>
                    </ul>

                    <h2>The Golden Rules of Indexing Strategy</h2>

                    <h3>1. Analyze Before You Index</h3>
                    <p>Never add an index without evidence. Use these tools:</p>

                    <pre><code class="language-sql">-- MySQL: Enable slow query log
SET GLOBAL slow_query_log = 'ON';
SET GLOBAL long_query_time = 1;

-- PostgreSQL: Enable pg_stat_statements
CREATE EXTENSION pg_stat_statements;
SELECT query, calls, mean_time, total_time
FROM pg_stat_statements
ORDER BY total_time DESC
LIMIT 20;</code></pre>

                    <h3>2. Understand Composite Index Column Order</h3>
                    <p>The order of columns in a composite index matters tremendously. Follow the <strong>ESR
                            Rule</strong> (Equality, Sort, Range):</p>

                    <pre><code class="language-sql">-- Query pattern
SELECT * FROM orders 
WHERE status = 'completed'     -- Equality
  AND user_id = 123            -- Equality  
  AND created_at > '2026-01-01' -- Range
ORDER BY created_at DESC;       -- Sort

-- Optimal index
CREATE INDEX idx_optimal ON orders(status, user_id, created_at);</code></pre>

                    <h3>3. Audit Indexes Regularly</h3>
                    <p>Set up quarterly index audits. Here's a query to find unused indexes:</p>

                    <pre><code class="language-sql">-- PostgreSQL: Find unused indexes
SELECT 
    schemaname || '.' || relname AS table,
    indexrelname AS index,
    pg_size_pretty(pg_relation_size(i.indexrelid)) AS index_size,
    idx_scan AS times_used
FROM pg_stat_user_indexes ui
JOIN pg_index i ON ui.indexrelid = i.indexrelid
WHERE NOT indisunique 
  AND idx_scan < 50
ORDER BY pg_relation_size(i.indexrelid) DESC;</code></pre>

                    <h2>Key Takeaways</h2>
                    <ul>
                        <li>Treat indexes as a trade-off between read and write performance</li>
                        <li>Always measure query patterns before adding indexes</li>
                        <li>Consolidate overlapping indexes into efficient composite indexes</li>
                        <li>Audit and remove unused indexes quarterly</li>
                        <li>Document why each index exists in your schema</li>
                    </ul>

                    <p>Remember: <strong>The best index is one that serves multiple query patterns efficiently, not one
                            index per query.</strong></p>
                </div>

                <div class="post-tags" data-aos="fade-up">
                    <span class="tag">Database</span>
                    <span class="tag">Performance</span>
                    <span class="tag">MySQL</span>
                    <span class="tag">PostgreSQL</span>
                    <span class="tag">Optimization</span>
                </div>
            </article>
        </div>
    </main>

    <!-- Footer -->
    <div class="rn-footer-area rn-section-gap section-separator">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="footer-area text-center">
                        <p class="description">© 2026 Utkarsh Shukla. All rights reserved.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Back to Top -->
    <div class="backto-top">
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="18 15 12 9 6 15"></polyline>
            </svg>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../../assets/js/vendor/jquery.min.js"></script>
    <script src="../../assets/js/vendor/aos.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>

    <script>
        // Initialize AOS
        AOS.init({ duration: 500, once: true });

        // ===========================================
        // THEME TOGGLE SYSTEM
        // ===========================================
        (function () {
            'use strict';

            const THEME_KEY = 'portfolio-theme-preference';
            const THEMES = ['light', 'dark', 'system'];

            function getStoredTheme() {
                return localStorage.getItem(THEME_KEY) || 'light';
            }

            function getSystemTheme() {
                return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
            }

            function applyTheme(theme, isInitial = false) {
                const body = document.body;

                if (isInitial) body.classList.add('no-transition');

                body.classList.remove('white-version', 'dark-version');
                body.removeAttribute('data-theme');

                let actualTheme = theme;
                if (theme === 'system') {
                    actualTheme = getSystemTheme();
                    body.setAttribute('data-theme', 'system');
                }

                if (actualTheme === 'light') {
                    body.classList.add('white-version');
                } else {
                    body.classList.add('dark-version');
                }

                localStorage.setItem(THEME_KEY, theme);

                if (isInitial) {
                    requestAnimationFrame(() => {
                        requestAnimationFrame(() => {
                            body.classList.remove('no-transition');
                        });
                    });
                }
            }

            function cycleTheme() {
                const currentTheme = getStoredTheme();
                const currentIndex = THEMES.indexOf(currentTheme);
                const nextIndex = (currentIndex + 1) % THEMES.length;
                applyTheme(THEMES[nextIndex]);
            }

            function initTheme() {
                applyTheme(getStoredTheme(), true);
                window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
                    if (getStoredTheme() === 'system') applyTheme('system');
                });
            }

            function setupThemeToggle() {
                const toggleBtn = document.getElementById('themeToggle');
                let isThrottled = false;

                function handleThemeToggle(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    if (isThrottled) return;
                    isThrottled = true;
                    cycleTheme();
                    setTimeout(() => { isThrottled = false; }, 300);
                }

                if (toggleBtn) toggleBtn.addEventListener('click', handleThemeToggle);
            }

            initTheme();
            document.addEventListener('DOMContentLoaded', setupThemeToggle);
        })();

        // Prism highlighting
        Prism.highlightAll();

        // Back to top
        document.addEventListener('DOMContentLoaded', function () {
            const backToTop = document.querySelector('.backto-top');

            window.addEventListener('scroll', function () {
                backToTop.style.opacity = window.scrollY > 100 ? '1' : '0';
            });

            backToTop.addEventListener('click', function () {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        });

        // Sticky header
        window.addEventListener('scroll', function () {
            const header = document.querySelector('.header--sticky');
            header.classList.toggle('sticky', window.scrollY > 250);
        });
    </script>
</body>

</html>